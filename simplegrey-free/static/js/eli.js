var api="/api/",user_api="users/show/",user_rss="statuses/user_timeline/",group_api="statusnet/groups/show/",group_rss="statusnet/groups/timeline/",api_url=domain+api+user_api,api_rss_url=domain+api+user_rss,img_name="profile_image_url";"group"==type&&(api_url=domain+api+group_api,api_rss_url=domain+api+group_rss,img_name="stream_logo");url=api_url+user+".xml";function displayResult(){xmlhttp=window.XMLHttpRequest?new XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP");xmlhttp.open("GET",url,!1);xmlhttp.send();xmlDoc=xmlhttp.responseXML;userinfo=xmlDoc.getElementsByTagName(type);try{id=userinfo[0].getElementsByTagName("id")[0].childNodes[0].nodeValue}catch(e){id=e}try{img=userinfo[0].getElementsByTagName(img_name)[0].childNodes[0].nodeValue}catch(f){img=""}rss_url=api_rss_url+id+".xml";xmlhttp.open("GET",rss_url,!1);xmlhttp.send();xmlDoc=xmlhttp.responseXML; content='<div id="eli_widget"><header>';""!==img&&(content+='<img src="'+img+'" alt="'+user+'" title="Avatar"/>');content+=" <p>"+user+"</p></header>";for(var b=xmlDoc.getElementsByTagName("statuses").item(0).getElementsByTagName("status"),c=max-1,a=0;a<b.length;a++){var h,i="";try{var d=b[a].getElementsByTagName('statusnet:html').item(0).firstChild.data} catch(g){d=""}try{if (['image/jpeg','image/gif','image/png','image/svg'].indexOf(b[a].getElementsByTagName('attachments').item(0).getElementsByTagName('enclosure').item(0).getAttribute("mimetype"))>=0){h=b[a].getElementsByTagName('attachments').item(0).getElementsByTagName('enclosure').item(0).getAttribute("url");i="<a target= \"_blank\" href=\""+h+"\"><img alt=\"Attachment\" width=\"200\" src=" + h + " /></a>"}} catch(e) {h,i=""}content+="<article>"+d+i+"</article>";c<b.length&&a==c&&(a=b.length)}content+="<footer></footer></div>";document.getElementById(tag).innerHTML=content}window.onload=displayResult;